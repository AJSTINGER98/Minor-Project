<%- include ("partials/header") %>

<div id="back"></div>
<div class="container-fluid">
    <div class="row">
    <% if(isOwner){%>
        <%if(person.image){%>
            <div class="col-md-3 d-flex justify-content-end profile-pic-hover" style="margin-top: -100px;" >
                <img src="/Images/profile-pic-edit.png" class="img-thumbnail img-top" alt="Profile Picture" data-toggle ="modal" data-target="#profileImage" style="cursor:pointer">
                <img  src="/form/<%= person.image %>" class="img-thumbnail img-bottom" alt="Profile Picture" data-toggle ="modal" data-target="#profileImage" style="cursor:pointer">
                <br><br>
            </div>
        <%} else{%> 
            <div class="col-md-3 d-flex justify-content-end profile-pic-hover" style="margin-top: -100px;" >
                <img src="/Images/profile-pic-add.png" class="img-thumbnail img-top" alt="Profile Picture" data-toggle ="modal" data-target="#profileImage" style="cursor:pointer">
            <%if(person.title == "Mrs." || person.title == "Miss"){%>
                <img src="/Images/Female.jpg" class="img-thumbnail img-bottom" alt="Profile Picture" data-toggle ="modal" data-target="#profileImage" style="cursor:pointer">
            <%} else {%>   
                <img src="/Images/Male.jpg" class="img-thumbnail img-bottom" alt="Profile Picture" data-toggle ="modal" data-target="#profileImage" style="cursor:pointer">
            <%}%>
                <br><br>
            </div>    
        <% }%>
    
    <%} else {%>
        <%if(person.image){%>
            <div class="col-md-3 d-flex justify-content-end" style="margin-top: -100px;" >
                <img src="/form/<%= person.image %>" class="img-thumbnail" alt="Profile Picture">
                <br><br>
            </div>
        <%} else{%> 
            <div class="col-md-3 d-flex justify-content-end" style="margin-top: -100px;" >
        <%if(person.title == "Mrs." || person.title == "Miss"){%>
                <img src="/Images/Female.jpg" class="img-thumbnail" alt="Profile Picture" >
        <%} else {%>   
                <img src="/Images/Male.jpg" class="img-thumbnail" alt="Profile Picture" >
        <%}%>
                <br><br>
            </div>    
        <% }%>
    
    
    <%}%>
    <div class="modal fade" id="profileImage" tabindex="-1" role="dialog" aria-labelledby="profileImageLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Upload Profile Picture</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <form action="/<%= person.image  ? `${personType}/${person._id}/image/edit/${imgID}` : `${personType}/${person._id}/image/upload`%>/" method="POST" enctype="multipart/form-data">
                <div class="modal-body">
                    <div class="row d-flex justify-content-center">
                        <div class="col-sm-8 form-group">
                            <div class="custom-file h-50">
                                <input type="file" name="image" id="image" class="custom-file-input" accept="image/*" required>
                                <label for="image" class="custom-file-label" placeholder = "Choose Image"></label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Upload</button>
                </div>
            </form>
          </div>
        </div>
      </div>
        <div class="col-md-9 pl-1 pr-5">
            <div id="info">
                <h1 class="display-4"><%= person.title %><%= person.firstName %> <%= person.lastName %></h1>
                <h6><%= person.academicRole %></h6>
            </div>
            <div class="row">
                <div id="info" class="col-md-6">
                    <p>
                        Department of <%= person.department %><br>
                        <%= person.school %>
                    </p>
                </div>
                <div id="info1" class="col-md-6 pl-5">
                    <h5>CONTACT INFORMATION </h5>
                    <p>
                        <i class="fas fa-envelope pr-1"></i>
                        Email - <a href="mailto:<%= person.email %>">
                                    <em><span><%= person.email %></span></em><br>
                                </a>
                        <i class="fas fa-phone-alt pr-1"></i>
                        Phone - <strong>+91 - </strong>
                                <a href="tel:<%= person.phone %>">
                                    <span><%= person.phone %></span>
                                </a>
                    </p>
                </div>
            </div>
            <hr style="padding-bottom: 20px; width: 50%;">
            <% if(person.FoE) { %>
                <div id="info1" class="container">
                    <h5>FIELD OF EXPERTISE </h5>
                    <!-- <p> -->
                    <ul style="list-style-type:square; margin-left:20px;">
                        <% person.FoE.forEach(function(field){ %>
                                <li><%= field %></li>
                        <% }); %>
                    </ul>
                    <!-- </p> -->
                </div>
            <% } %>
            <div id="info1" class="container">
                <h5>ACADEMIC QUALIFICATION</h5>
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th scope="col">Degree</th>
                            <th scope="col">Institute</th>
                            <th scope="col">Specialisation</th>
                            <th scope="col">Year of Passing</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% person.academicQ.forEach(function(field){ %>
                            <% var str = field.degree %>
                            <tr>
                                <th scope="row"><%= str.slice(str.indexOf("(") + 1, str.length - 1); %></th>
                                <td><%= field.institute %></td>
                                <td><%= field.specialisation %></td>
                                <td><%= field.yoc %></td>
                            </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
            <% if(person.experience && person['experience'][0]['organisation'].length != 0){ %>
                <div id="info1" class="container">
                    <h5>EXPERIENCE</h5>
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th scope="col">Organisation</th>
                                <th scope="col">Designation</th>
                                <th scope="col">Role</th>
                                <th scope="col">Tenure</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% person.experience.forEach(function(field){ %>
                                <tr>
                                    <td><%= field.organisation %></td>
                                    <td><%= field.designation %></td>
                                    <td><%= field.role %></td>
                                    <td><%= field.tenure %></td>
                                </tr>
                            <% }); %>
                        </tbody>
                    </table>
                </div>
            <% } %>

            <% if(person.research && person['research'][0]['title'].length != 0){ %>
                <div id="info1" class="container">
                    <h5>RESEARCH PROJECT</h5>
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th scope="col">Project Title</th>
                                <th scope="col">Duration</th>
                                <th scope="col">Funding Agency</th>
                                <th scope="col">Role</th>
                                <th scope="col">Amount(INR)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% person.research.forEach(function(field){ %>
                                <tr>
                                    <td><%= field.title %></td>
                                    <td><%= field.duration %></td>
                                    <td><%= field.agency %></td>
                                    <td><%= field.role %></td>
                                    <td><%= field.amount %></td>
                                </tr>
                            <% }); %>
                        </tbody>
                    </table>
                </div>
            <% } %>
            <div class="float-right mb-3">
                <a class="btn btn-xs btn-warning px-4 py-1" href="/<%= path %>/<%= person._id %>/edit">EDIT</a>
            </div>
            <form class="delete float-right" action="/<%= path %>/<%= person._id %>?_method=DELETE" method="POST">
                <button class="btn btn-xs btn-danger px-3 py-1">DELETE</button>
            </form>
        </div>
    </div>
</div>

<%- include ("partials/footer") %>